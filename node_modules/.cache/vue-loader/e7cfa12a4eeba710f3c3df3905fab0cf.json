{"remainingRequest":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\src\\pages\\schoolboy\\task-execute\\TaskLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\src\\pages\\schoolboy\\task-execute\\TaskLayout.vue","mtime":1604217662000},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602893211453},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1597332929808},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602893211453},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1602893217884}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBodHRwIGZyb20gJ0AvaHR0cC9odHRwJzsKCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgVHJ5U2Nob29sYm95IGZyb20gJ0AvZG9tYWluL1RyeVNjaG9vbGJveSc7CgppbXBvcnQgcm91dGUgZnJvbSAnQC9taXhpbnMvcm91dGUnOwoKaW1wb3J0IFRhc2tQYXJhbWV0ZXJzTGF5b3V0IGZyb20gJ0AvcGFnZXMvc2Nob29sYm95L3Rhc2stZXhlY3V0ZS9UYXNrUGFyYW1ldGVyc0xheW91dCc7CmltcG9ydCBUcmllc0xheW91dCBmcm9tICdAL3BhZ2VzL3NjaG9vbGJveS90YXNrLWV4ZWN1dGUvVHJpZXNMYXlvdXQnOwppbXBvcnQgTW9kYWxSZXN1bHQgZnJvbSAnQC9wYWdlcy9zY2hvb2xib3kvdGFzay1leGVjdXRlL01vZGFsUmVzdWx0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFza0xheW91dCcsCiAgY29tcG9uZW50czogewogICAgTW9kYWxSZXN1bHQsCiAgICBUcmllc0xheW91dCwKICAgIFRhc2tQYXJhbWV0ZXJzTGF5b3V0CiAgfSwKICBtaXhpbnM6IFsgcm91dGUgXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFzazogbnVsbCwKICAgICAgdHJ5U2Nob29sYm95OiBudWxsLAogICAgICBpc1RleHRBcmVhRGlzYWJsZWQ6IGZhbHNlLAogICAgICB0cmllc0xpc3Q6IFtdLAogICAgICBpc01vZGFsU2hvdzogZmFsc2UsCiAgICAgIGlzRXhlY3V0ZUNvZGU6IGZhbHNlLAogICAgICB0ZXN0Q2FzZXM6IFtdLAogICAgICB0ZXN0Q2FzZXNSZXN1bHQ6IFtdLAogICAgICBsYW5nT3B0aW9uczogWwogICAgICAgIHsgaWQ6ICdqYXZhJywgbGFiZWw6ICdqYXZhJyB9LAogICAgICAgIHsgaWQ6ICdjcHAnLCBsYWJlbDogJ2MrKyd9LAogICAgICAgIHsgaWQ6ICdjJywgbGFiZWw6ICdjJ30sCiAgICAgIF0sCiAgICAgIGxhbmc6IG51bGwsCiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgIHRoaXMudGFzayA9IHRoaXMuU0NIT09MQk9ZX1RBU0tfTElTVC5maW5kKHRhc2sgPT4gdGFzay5pZCA9PT0gdGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICAgICAgdGhpcy5pbml0aWFsaXplVHJ5KCk7CgogICAgICBhd2FpdCB0aGlzLnNldFRyaWVzTGlzdCgpOwogICAgfSwgMTIwKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc1Nob3dSZXZpZXdCdXR0b24oKSB7CiAgICAgIHJldHVybiAhdGhpcy5pc0V4ZWN1dGVDb2RlICYmIHRoaXMudHJ5U2Nob29sYm95LmNvZGUgJiYgIXRoaXMuaXNUZXh0QXJlYURpc2FibGVkOwogICAgfSwKICAgIGlzU2hvd0NsZWFyQnV0dG9uKCkgewogICAgICByZXR1cm4gIXRoaXMuaXNFeGVjdXRlQ29kZSAmJiB0aGlzLnRyeVNjaG9vbGJveS5jb2RlOwogICAgfSwKICAgIC4uLm1hcEdldHRlcnMoWydTQ0hPT0xCT1lfVEFTS19MSVNUJywgJ1NDSE9PTEJPWSddKSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVRhYihlKSB7CiAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdGhpcy50cnlTY2hvb2xib3kuY29kZSA9IHRoaXMudHJ5U2Nob29sYm95LmNvZGUuY29uY2F0KCcgICcpOwogICAgICB9CiAgICB9LAogICAgY2xlYXJDb2RlKCkgewogICAgICB0aGlzLnRyeVNjaG9vbGJveS5jb2RlID0gJyc7CiAgICAgIHRoaXMuaXNUZXh0QXJlYURpc2FibGVkID0gZmFsc2U7CiAgICAgIHRoaXMuQ0xFQVJfQUNUSVZFX1RSWSgpOwogICAgfSwKICAgIHB1dENvZGVJbkFyZWEodGFza1RyeSkgewogICAgICB0aGlzLnRyeVNjaG9vbGJveS5jb2RlID0gdGFza1RyeS5jb2RlOwogICAgICB0aGlzLmlzVGV4dEFyZWFEaXNhYmxlZCA9IHRydWU7CiAgICB9LAogICAgYXN5bmMgc2V0VHJpZXNMaXN0KCkgewogICAgICB0aGlzLnRyaWVzTGlzdCA9IGF3YWl0IGh0dHAuZ2V0QWxsVHJpZXModGhpcy5TQ0hPT0xCT1kuaWQsIHRoaXMudGFzay5pZCkKICAgICAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLmxvZygn0KXRjNGO0YHRgtC+0L0g0YMg0L3QsNGBINC/0YDQvtCx0LvQtdC80YsnKSk7CiAgICB9LAogICAgYXN5bmMgc2F2ZVRyeSgpIHsKICAgICAgdGhpcy5pc0V4ZWN1dGVDb2RlID0gZmFsc2U7CiAgICAgIGNvbnN0IGFyckxlbmd0aCA9IHRoaXMudHJpZXNMaXN0Lmxlbmd0aDsKICAgICAgdGhpcy50cnlTY2hvb2xib3kudHJ5TnVtYmVyID0gYXJyTGVuZ3RoICsgMTsKCgogICAgICBjb25zdCBuZXdUcnkgPSBhd2FpdCBodHRwLnNhdmVUcnkodGhpcy50cnlTY2hvb2xib3kpOwogICAgICBpZiAobmV3VHJ5KSB7CiAgICAgICAgdGhpcy50cmllc0xpc3QucHVzaChuZXdUcnkpOwogICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRyeSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0UmVzdWx0KCkgewogICAgICBsZXQgcmVzdWx0ID0gMTAwOwoKICAgICAgY29uc3QgaW5pdExlbmd0aCA9IHRoaXMudGVzdENhc2VzUmVzdWx0Lmxlbmd0aDsKICAgICAgY29uc3QgZXhlY3V0aW9uQ2FzZSA9IHRoaXMudGVzdENhc2VzUmVzdWx0CiAgICAgICAgICAuZmlsdGVyKHRjID0+IHRjLnR5cGUgPT09ICdTVUNDRVNTJyk7CiAgICAgIGNvbnN0IGV4ZWN1dGlvbkNhc2VMZW5ndGggPSBleGVjdXRpb25DYXNlLmxlbmd0aDsKCiAgICAgIGlmIChleGVjdXRpb25DYXNlTGVuZ3RoICE9PSBpbml0TGVuZ3RoKSB7CiAgICAgICAgcmVzdWx0ID0gZXhlY3V0aW9uQ2FzZUxlbmd0aCAvIGluaXRMZW5ndGg7CgogICAgICAgIGlmIChyZXN1bHQgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGVxdWFsSW5wdXRMZW5ndGggPSBleGVjdXRpb25DYXNlLmZpbHRlcihlYyA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRlc3RDYXNlID0gdGhpcy50ZXN0Q2FzZXMuZmluZCh0YyA9PiBlYy5pZCA9PT0gdGMuaWQpCiAgICAgICAgICAgIHJldHVybiB0ZXN0Q2FzZS5vdXRwdXQgPT09IGVjLm91dHB1dDsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGVxdWFsSW5wdXRMZW5ndGgubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGVxdWFsSW5wdXRMZW5ndGggLyBleGVjdXRpb25DYXNlTGVuZ3RoOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGluaXRpYWxpemVUcnkoKSB7CiAgICAgIHRoaXMudHJ5U2Nob29sYm95ID0gbmV3IFRyeVNjaG9vbGJveSh7IHNjaG9vbGJveUlkOiB0aGlzLlNDSE9PTEJPWS5pZCwgdGFza0lkOiB0aGlzLnRhc2suaWQgfSk7CiAgICB9LAogICAgYXN5bmMgZXhlY3V0ZUNvZGUoKSB7CiAgICAgIHRoaXMuaXNFeGVjdXRlQ29kZSA9IHRydWU7CiAgICAgIGF3YWl0IGh0dHAuZ2V0QWxsVGVzdENhc2VzKHRoaXMudHJ5U2Nob29sYm95LnRhc2tJZCkudGhlbigKICAgICAgICAgIGFzeW5jIChkYXRhKSA9PiB7CiAgICAgICAgICAgIHRoaXMudGVzdENhc2VzID0gZGF0YTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5leGVjdXRlQWxsVGVzdENhc2VzKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy50cnlTY2hvb2xib3kucmVzdWx0ID0gdGhpcy5nZXRSZXN1bHQoKTsKICAgICAgICAgICAgICB0aGlzLmlzTW9kYWxTaG93ID0gdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgKTsKICAgIH0sCiAgICBhc3luYyBleGVjdXRlQWxsVGVzdENhc2VzKCkgewogICAgICBjb25zdCBsYW5nID0gdGhpcy5sYW5nID8gdGhpcy5sYW5nLmlkIDogJ2phdmEnOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGVzdENhc2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXdhaXQgaHR0cC5leGVjdXRlVGVzdENhc2UodGhpcy50cnlTY2hvb2xib3kuY29kZSwgdGhpcy50ZXN0Q2FzZXNbaV0sIGxhbmcpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgIHRoaXMudGVzdENhc2VzUmVzdWx0W2ldID0geyAuLi5kYXRhLCBpZDogdGhpcy50ZXN0Q2FzZXNbaV0uaWQgfTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC4uLm1hcE11dGF0aW9ucyhbJ0NMRUFSX0FDVElWRV9UUlknXSksCiAgfSwKfQo="},{"version":3,"sources":["TaskLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskLayout.vue","sourceRoot":"src/pages/schoolboy/task-execute","sourcesContent":["<template>\n <div v-if=\"task && isRouteAvailable('SCHOOLBOY')\" class=\"task-container\">\n   <div class=\"main-info\">\n      <task-parameters-layout :task=\"task\"/>\n       <textarea\n           v-if=\"trySchoolboy\"\n           class=\"code-space\"\n           v-model=\"trySchoolboy.code\"\n           @keydown=\"handleTab($event)\"\n           :disabled=\"isTextAreaDisabled\"  />\n       <tries-layout\n           :tries-list=\"triesList\"\n           @setActiveTry=\"putCodeInArea($event)\" />\n   </div>\n   <div class=\"task-action\">\n       <tree-select\n           style=\"width: 200px; height: 4vh\"\n           v-model=\"lang\"\n           placeholder=\"\"\n           :options=\"langOptions\"/>\n       <div\n           v-if=\"isShowReviewButton\"\n           class=\"button-review\"\n           @click=\"executeCode()\"\n       >\n         <custom-icon\n             name=\"eye\"\n             color=\"#00D1FF\"\n         />\n         Проверить код\n       </div>\n       <modal-result\n           v-model=\"isModalShow\"\n           :try-schoolboy=\"trySchoolboy\"\n           :test-cases=\"testCasesResult\"\n           @save=\"saveTry\"\n           @close=\"isExecuteCode = false\"\n       />\n       <div\n           v-if=\"isShowClearButton\"\n           class=\"button-clear\"\n           @click=\"clearCode\"\n       >\n         Сбросить\n       </div>\n   </div>\n </div>\n</template>\n\n<script>\nimport http from '@/http/http';\n\nimport { mapGetters, mapMutations } from 'vuex';\nimport TrySchoolboy from '@/domain/TrySchoolboy';\n\nimport route from '@/mixins/route';\n\nimport TaskParametersLayout from '@/pages/schoolboy/task-execute/TaskParametersLayout';\nimport TriesLayout from '@/pages/schoolboy/task-execute/TriesLayout';\nimport ModalResult from '@/pages/schoolboy/task-execute/ModalResult';\n\nexport default {\n  name: 'TaskLayout',\n  components: {\n    ModalResult,\n    TriesLayout,\n    TaskParametersLayout\n  },\n  mixins: [ route ],\n  data() {\n    return {\n      task: null,\n      trySchoolboy: null,\n      isTextAreaDisabled: false,\n      triesList: [],\n      isModalShow: false,\n      isExecuteCode: false,\n      testCases: [],\n      testCasesResult: [],\n      langOptions: [\n        { id: 'java', label: 'java' },\n        { id: 'cpp', label: 'c++'},\n        { id: 'c', label: 'c'},\n      ],\n      lang: null,\n    }\n  },\n  async created() {\n    setTimeout(async () => {\n      this.task = this.SCHOOLBOY_TASK_LIST.find(task => task.id === this.$route.params.id);\n      this.initializeTry();\n\n      await this.setTriesList();\n    }, 120);\n  },\n  computed: {\n    isShowReviewButton() {\n      return !this.isExecuteCode && this.trySchoolboy.code && !this.isTextAreaDisabled;\n    },\n    isShowClearButton() {\n      return !this.isExecuteCode && this.trySchoolboy.code;\n    },\n    ...mapGetters(['SCHOOLBOY_TASK_LIST', 'SCHOOLBOY']),\n  },\n  methods: {\n    handleTab(e) {\n      if (e.key === 'Tab') {\n        e.preventDefault();\n        this.trySchoolboy.code = this.trySchoolboy.code.concat('  ');\n      }\n    },\n    clearCode() {\n      this.trySchoolboy.code = '';\n      this.isTextAreaDisabled = false;\n      this.CLEAR_ACTIVE_TRY();\n    },\n    putCodeInArea(taskTry) {\n      this.trySchoolboy.code = taskTry.code;\n      this.isTextAreaDisabled = true;\n    },\n    async setTriesList() {\n      this.triesList = await http.getAllTries(this.SCHOOLBOY.id, this.task.id)\n          .catch(() => console.log('Хьюстон у нас проблемы'));\n    },\n    async saveTry() {\n      this.isExecuteCode = false;\n      const arrLength = this.triesList.length;\n      this.trySchoolboy.tryNumber = arrLength + 1;\n\n\n      const newTry = await http.saveTry(this.trySchoolboy);\n      if (newTry) {\n        this.triesList.push(newTry);\n        this.initializeTry();\n      }\n    },\n    getResult() {\n      let result = 100;\n\n      const initLength = this.testCasesResult.length;\n      const executionCase = this.testCasesResult\n          .filter(tc => tc.type === 'SUCCESS');\n      const executionCaseLength = executionCase.length;\n\n      if (executionCaseLength !== initLength) {\n        result = executionCaseLength / initLength;\n\n        if (result !== 0) {\n          const equalInputLength = executionCase.filter(ec => {\n            const testCase = this.testCases.find(tc => ec.id === tc.id)\n            return testCase.output === ec.output;\n          });\n          if (equalInputLength.length !== 0) {\n            result = equalInputLength / executionCaseLength;\n          }\n        }\n      }\n      return result;\n    },\n    initializeTry() {\n      this.trySchoolboy = new TrySchoolboy({ schoolboyId: this.SCHOOLBOY.id, taskId: this.task.id });\n    },\n    async executeCode() {\n      this.isExecuteCode = true;\n      await http.getAllTestCases(this.trySchoolboy.taskId).then(\n          async (data) => {\n            this.testCases = data;\n            await this.executeAllTestCases().then(() => {\n              this.trySchoolboy.result = this.getResult();\n              this.isModalShow = true\n            });\n          }\n      );\n    },\n    async executeAllTestCases() {\n      const lang = this.lang ? this.lang.id : 'java';\n      for (let i = 0; i < this.testCases.length; i++) {\n        await http.executeTestCase(this.trySchoolboy.code, this.testCases[i], lang).then((data) => {\n          this.testCasesResult[i] = { ...data, id: this.testCases[i].id };\n        });\n      }\n    },\n    ...mapMutations(['CLEAR_ACTIVE_TRY']),\n  },\n}\n</script>\n\n<style lang=\"sass\" scoped>\n .task-container\n   width: 100vw\n   background: #000000\n\n .main-info\n   display: flex\n   flex-wrap: nowrap\n   height: 80.6vh\n   font-size: 14px\n   line-height: 17px\n\n .code-space\n   width: 55vw\n   padding: 30px 20px\n   background: #352872\n   color: #FFFFFF\n   outline: none\n   border: none\n   resize: none\n\n .task-action\n   height: 9.7vh\n   margin-left: 25vw\n   display: flex\n   align-items: center\n   column-gap: 20px\n</style>"]}]}