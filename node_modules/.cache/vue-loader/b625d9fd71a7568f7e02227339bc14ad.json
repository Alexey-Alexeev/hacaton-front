{"remainingRequest":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\src\\pages\\admin\\Admin.vue?vue&type=style&index=0&id=590643ca&lang=sass&scoped=true&","dependencies":[{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\src\\pages\\admin\\Admin.vue","mtime":1604217662000},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1602893217732},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1602893217884},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1597332931051},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1597332931168},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602893211453},{"path":"C:\\Users\\Alexey\\Desktop\\ЛЦТ\\kk\\hacaton-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1602893217884}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYWRtaW4tY29udGFpbmVyCiAgZGlzcGxheTogZmxleAogIHBhZGRpbmc6IDYwcHgKCi5vZmYtY2FudmFzLW1lbnUKICBoZWlnaHQ6IDEwMHZoCiAgd2lkdGg6IGZpdC1jb250ZW50CiAgcGFkZGluZy1yaWdodDogNDBweAogIG1hcmdpbjogMAoKICAmLnNob3duCiAgICB3aWR0aDogMzAwcHgKCi51c2VyLXRhYmxlCiAgd2lkdGg6IDcwdncKCi5pY29uLW1lbnUKICBtYXJnaW4tYm90dG9tOiAyMHB4CiAgY3Vyc29yOiBwb2ludGVyCgoubWVudS1yb3cKICBkaXNwbGF5OiBmbGV4CiAgYWxpZ24taXRlbXM6IGNlbnRlcgogIGxpbmUtaGVpZ2h0OiA0MHB4CiAgY29sdW1uLWdhcDogMjBweAogIGNvbG9yOiAjNjY3ODhBCiAgZm9udC13ZWlnaHQ6IDYwMAogIGZvbnQtc2l6ZTogMTZweAogIG1hcmdpbi1ib3R0b206IDEwcHgKICBjdXJzb3I6IHBvaW50ZXIKICBwYWRkaW5nLWxlZnQ6IDVweAoKICAmOmhvdmVyCiAgICBiYWNrZ3JvdW5kOiAjY2NjYwogICAgYm9yZGVyLXJhZGl1czogMTBweAoKLnRhYmxlLWNvbnRhaW5lcgogIHBvc2l0aW9uOiByZWxhdGl2ZQoKLmRlbGV0ZS1pY29uCiAgcG9zaXRpb246IGFic29sdXRlCiAgbGVmdDogMAogIHRvcDogLTUwcHgKICBwYWRkaW5nOiAxMHB4IDIwcHgKICBib3JkZXItcmFkaXVzOiA4cHgKICBiYWNrZ3JvdW5kOiAjNTg0M0JFCiAgYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMnB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMTIpLCAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjIpCiAgZGlzcGxheTogZmxleAogIGFsaWduLWl0ZW1zOiBjZW50ZXIKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcgogIGNvbHVtbi1nYXA6IDEwcHgKICBjdXJzb3I6IHBvaW50ZXIKICBmb250LXdlaWdodDogNTAwCiAgZm9udC1zaXplOiAxNHB4CiAgbGluZS1oZWlnaHQ6IDE2cHgK"},{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/pages/admin","sourcesContent":["<template>\n <div class=\"admin-container\" v-if=\"isRouteAvailable('ADMIN')\">\n   <div class=\"off-canvas-menu\" :class=\"{ 'shown': isShownMenu }\">\n     <custom-icon\n         class=\"icon-menu\"\n         name=\"form\"\n         color=\"black\"\n         container-size=\"large\"\n         @click=\"isShownMenu=!isShownMenu\"\n     />\n     <div v-if=\"isShownMenu\">\n       <div class=\"menu-row\" @click=\"showTable('task')\">\n          <custom-icon name=\"admin-task\" color=\"#66788A\" container-size=\"medium\"/>\n          Домашние задания\n       </div>\n       <div class=\"menu-row\" @click=\"showTable('user')\">\n          <custom-icon name=\"admin-user\" color=\"#66788A\" container-size=\"medium\"/>\n          Пользователи\n       </div>\n     </div>\n   </div>\n   <div class=\"table-container\">\n     <v-data-table\n         v-if=\"isShownUserTable\"\n         ref=\"usertable\"\n         class=\"user-table\"\n         :headers=\"userTableHeaders\"\n         :items=\"users\"\n         show-select\n         hide-default-footer\n     >\n        <template slot=\"no-data\">\n          <span>Данных не найдено</span>\n        </template>\n     </v-data-table>\n     <v-data-table\n         v-if=\"isShownTaskTable\"\n         ref=\"tasktable\"\n         class=\"user-table\"\n         :headers=\"taskTableHeaders\"\n         :items=\"tasks\"\n         show-select\n         hide-default-footer\n     >\n       <template slot=\"no-data\">\n         <span>Данных не найдено</span>\n       </template>\n     </v-data-table>\n     <div class=\"delete-icon\" @click=\"deleteItems\">\n       <custom-icon name=\"trash\"></custom-icon>\n       Удалить\n     </div>\n   </div>\n </div>\n</template>\n\n<script>\nimport http from '@/http/http';\nimport route from '@/mixins/route';\n\nexport default {\n  name: 'Admin',\n  async created() {\n    if (this.isRouteAvailable('ADMIN')) {\n      this.users = await http.getAllUser();\n      this.tasks = await http.getAllTasks();\n    }\n  },\n  mixins: [ route ],\n  data() {\n    return {\n      userTableHeaders: [\n        { text: 'ФИО', value: 'name' },\n        { text: 'Роль', value: 'roleName' },\n      ],\n      users: [],\n      taskTableHeaders: [\n        { text: 'Задание', value: 'name' },\n        { text: 'Легенда', value: 'legend' },\n        { text: 'Описание', value: 'description' },\n      ],\n      tasks: [],\n      isShownMenu: false,\n      isShownUserTable: true,\n      isShownTaskTable: false,\n    }\n  },\n  methods: {\n    async deleteItems() {\n      if (this.isShownUserTable) {\n        await this.deleteUsers();\n      }\n      if (this.isShownTaskTable) {\n        await this.deleteTasks();\n      }\n    },\n    async deleteUsers() {\n      const usersArray = this.$refs.usertable.selection;\n      if (usersArray) {\n        for (const usersArrayKey in usersArray) {\n          if (usersArray[usersArrayKey].role !== 'ADMIN') {\n            await http.deleteUserById(usersArray[usersArrayKey].id);\n            this.users = this.users.filter(v => v.id !== usersArray[usersArrayKey].id);\n          }\n        }\n      }\n    },\n    async deleteTasks() {\n      const taskArray = this.$refs.tasktable.selection;\n      if (taskArray) {\n        for (const taskKey in taskArray) {\n          await http.deleteTaskById(taskArray[taskKey].id);\n          this.tasks = this.tasks.filter(v => v.id !== taskArray[taskKey].id);\n        }\n      }\n    },\n    showTable(tableName) {\n      if (tableName === 'user') {\n        this.isShownUserTable = true;\n        this.isShownTaskTable = false;\n      }\n      if (tableName === 'task') {\n        this.isShownTaskTable = true;\n        this.isShownUserTable = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\" scoped>\n  .admin-container\n    display: flex\n    padding: 60px\n\n  .off-canvas-menu\n    height: 100vh\n    width: fit-content\n    padding-right: 40px\n    margin: 0\n\n    &.shown\n      width: 300px\n\n  .user-table\n    width: 70vw\n\n  .icon-menu\n    margin-bottom: 20px\n    cursor: pointer\n\n  .menu-row\n    display: flex\n    align-items: center\n    line-height: 40px\n    column-gap: 20px\n    color: #66788A\n    font-weight: 600\n    font-size: 16px\n    margin-bottom: 10px\n    cursor: pointer\n    padding-left: 5px\n\n    &:hover\n      background: #cccc\n      border-radius: 10px\n\n  .table-container\n    position: relative\n\n  .delete-icon\n    position: absolute\n    left: 0\n    top: -50px\n    padding: 10px 20px\n    border-radius: 8px\n    background: #5843BE\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.14), 0 2px 1px rgba(0, 0, 0, 0.12), 0 1px 3px rgba(0, 0, 0, 0.2)\n    display: flex\n    align-items: center\n    justify-content: center\n    column-gap: 10px\n    cursor: pointer\n    font-weight: 500\n    font-size: 14px\n    line-height: 16px\n</style>"]}]}